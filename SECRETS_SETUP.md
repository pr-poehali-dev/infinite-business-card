# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã backend-—Ñ—É–Ω–∫—Ü–∏–π.

---

## üìã –°–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤

### 1. JWT_SECRET (–ö—Ä–∏—Ç–∏—á–Ω–æ!)
**–î–ª—è —á–µ–≥–æ**: –ü–æ–¥–ø–∏—Å—å JWT —Ç–æ–∫–µ–Ω–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `auth`, `vk-auth`, `email-notifications`

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å**:
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–ª–∏–Ω–æ–π 32+ —Å–∏–º–≤–æ–ª–∞
openssl rand -hex 32
```

**–ü—Ä–∏–º–µ—Ä**: `a7f8d9e2c1b4a6f5e8d7c3b9a2f1e4d8c7b6a5f4e3d2c1b9a8f7e6d5c4b3a2f1`

**–ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å**: –í —Å–µ–∫—Ä–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏–º–µ–Ω–µ–º `JWT_SECRET`

---

### 2. DATABASE_URL (–ê–≤—Ç–æ-–Ω–∞—Å—Ç—Ä–æ–µ–Ω)
**–î–ª—è —á–µ–≥–æ**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `auth`, `cards`, `leads`, `analytics`, `payments`, `referrals`, `short-urls`, `quiz-analytics`

**–§–æ—Ä–º–∞—Ç**:
```
postgresql://username:password@host:port/database
```

‚ö†Ô∏è **–≠—Ç–æ—Ç —Å–µ–∫—Ä–µ—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**

---

### 3. SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
**–î–ª—è —á–µ–≥–æ**: –û—Ç–ø—Ä–∞–≤–∫–∞ email –ø–∏—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `email-notifications`

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:
- `SMTP_HOST` - —Ö–æ—Å—Ç SMTP —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `smtp.yandex.ru`)
- `SMTP_PORT` - –ø–æ—Ä—Ç (–æ–±—ã—á–Ω–æ `465` –¥–ª—è SSL –∏–ª–∏ `587` –¥–ª—è TLS)
- `SMTP_USER` - email –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∏—Å—å–º–∞
- `SMTP_PASSWORD` - –ø–∞—Ä–æ–ª—å –æ—Ç email

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–†–æ—Å—Å–∏—è):
- **–Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç–∞**: `smtp.yandex.ru:465`
- **Mail.ru**: `smtp.mail.ru:465`
- **VK WorkMail**: `smtp.vkworkmail.ru:465`

**–ü—Ä–∏–º–µ—Ä –¥–ª—è –Ø–Ω–¥–µ–∫—Å**:
```
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=noreply@yourdomain.ru
SMTP_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è", –∞ –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å –æ—Ç –ø–æ—á—Ç—ã

---

### 4. VK OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–î–ª—è —á–µ–≥–æ**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `vk-auth`

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [vk.com/apps?act=manage](https://vk.com/apps?act=manage)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ "Standalone-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∫–ª—é—á–∏—Ç–µ "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ó–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–ª—é—á

#### –°–µ–∫—Ä–µ—Ç—ã:
- `VK_APP_ID` - ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ü–∏—Ñ—Ä—ã)
- `VK_APP_SECRET` - –ó–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–ª—é—á

**–ü—Ä–∏–º–µ—Ä**:
```
VK_APP_ID=51234567
VK_APP_SECRET=a7B3cD4eF5G6h7I8
```

---

### 5. GigaChat API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–î–ª—è —á–µ–≥–æ**: AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Kandinsky  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `ai-generate`

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [developers.sber.ru/studio](https://developers.sber.ru/studio)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ GigaChat API
3. –ü–æ–ª—É—á–∏—Ç–µ Client ID –∏ Client Secret
4. –°–æ–∑–¥–∞–π—Ç–µ Base64 —Å—Ç—Ä–æ–∫—É: `echo -n "client_id:client_secret" | base64`

#### –°–µ–∫—Ä–µ—Ç—ã:
- `GIGACHAT_API_KEY` - Base64 —Å—Ç—Ä–æ–∫–∞ –∏–∑ Client ID:Secret

**–ü—Ä–∏–º–µ—Ä**:
```
GIGACHAT_API_KEY=YTdCM2NENCBlRjVHNmg3STg6YTdCM2NENCBlRjVHNmg3STg=
```

---

### 6. AWS S3 (–ê–≤—Ç–æ-–Ω–∞—Å—Ç—Ä–æ–µ–Ω)
**–î–ª—è —á–µ–≥–æ**: –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç—ã)  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**: `ai-generate`, `qr-generator`

#### –°–µ–∫—Ä–µ—Ç—ã:
- `AWS_ACCESS_KEY_ID` - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `AWS_SECRET_ACCESS_KEY` - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

‚ö†Ô∏è **–≠—Ç–∏ —Å–µ–∫—Ä–µ—Ç—ã —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**

---

## üöÄ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å poehali.dev
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–°–µ–∫—Ä–µ—Ç—ã"
3. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç —Å –Ω—É–∂–Ω—ã–º –∏–º–µ–Ω–µ–º –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ API (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
```bash
curl -X POST https://api.poehali.dev/secrets \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "name": "JWT_SECRET",
    "value": "your_secret_value",
    "description": "JWT signing key"
  }'
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ auth (JWT_SECRET):
```bash
curl -X POST https://functions.poehali.dev/YOUR_AUTH_FUNCTION_ID \
  -H "Content-Type: application/json" \
  -d '{
    "action": "register",
    "email": "test@example.com",
    "password": "test123",
    "name": "Test User"
  }'
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è `200 OK` —Å —Ç–æ–∫–µ–Ω–æ–º.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ email-notifications (SMTP):
```bash
curl -X POST https://functions.poehali.dev/YOUR_EMAIL_FUNCTION_ID \
  -H "Content-Type: application/json" \
  -H "X-Auth-Token: YOUR_JWT_TOKEN" \
  -d '{
    "to_email": "test@example.com",
    "subject": "Test",
    "type": "text",
    "content": "Test message"
  }'
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è `200 OK` –∏ –ø–∏—Å—å–º–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏.

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Git** - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–∏—Å—Ç–µ–º–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã** - –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞ –¥–ª—è JWT_SECRET
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã** - –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç–µ —É—Ç–µ—á–∫—É
4. **–†–∞–∑–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π** - dev/staging/production
5. **–õ–æ–≥–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —Å–∞–º–∏ —Å–µ–∫—Ä–µ—Ç—ã

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### "Server configuration error"
- –°–µ–∫—Ä–µ—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏–º–µ–Ω–∏ —Å–µ–∫—Ä–µ—Ç–∞ (UPPERCASE)

### "Invalid credentials" (SMTP)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SMTP –ø–æ—Ä—Ç –¥–æ—Å—Ç—É–ø–µ–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º)

### "VK credentials not configured"
- VK_APP_ID –∏–ª–∏ VK_APP_SECRET –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö VK –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω OAuth

### "AI service unavailable"
- GIGACHAT_API_KEY –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã –Ω–∞ API GigaChat
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Base64 —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Å–µ–∫—Ä–µ—Ç–æ–≤:
- Telegram: https://t.me/+QgiLIa1gFRY4Y2Iy
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.poehali.dev

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 17 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è**: 1.0
