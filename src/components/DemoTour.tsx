import { useState } from 'react';
import { Dialog, DialogContent } from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import Icon from '@/components/ui/icon';
import { Progress } from '@/components/ui/progress';

interface DemoTourProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  plan: 'free' | 'basic' | 'pro';
  onComplete: () => void;
}

const DemoTour = ({ open, onOpenChange, plan, onComplete }: DemoTourProps) => {
  const [currentStep, setCurrentStep] = useState(0);

  const tourSteps = {
    free: [
      {
        title: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º!',
        icon: 'Rocket',
        color: 'gray',
        description: '–í—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ',
        content: [
          '–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –≤–∏–∑–∏—Ç–∫—É –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç',
          '–ü–æ–ª—É—á–∏—Ç–µ QR-–∫–æ–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–º–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏',
          '–î–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ, –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏ –æ–ø–∏—Å–∞–Ω–∏–µ',
          '–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏'
        ],
        tip: '–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π'
      },
      {
        title: '–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑–∏—Ç–∫–∏',
        icon: 'CreditCard',
        color: 'green',
        description: '–í–∫–ª–∞–¥–∫–∞ "–í–∏–∑–∏—Ç–∫–∞"',
        content: [
          '–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–≤–æ—é –≤–∏–∑–∏—Ç–∫—É —Ç–∞–∫, –∫–∞–∫ –µ—ë –≤–∏–¥—è—Ç –∫–ª–∏–µ–Ω—Ç—ã',
          'QR-–∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∏–∑–∏—Ç–∫–∏',
          '–°–∫–∞—á–∞–π—Ç–µ QR-–∫–æ–¥ –¥–ª—è –ø–µ—á–∞—Ç–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö',
          '–î–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —á–µ—Ä–µ–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã –∏ —Å–æ—Ü—Å–µ—Ç–∏'
        ],
        tip: '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ —Å–≤–æ–∏–º —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º'
      },
      {
        title: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
        icon: 'Edit',
        color: 'blue',
        description: '–í–∫–ª–∞–¥–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"',
        content: [
          '–ò–∑–º–µ–Ω–∏—Ç–µ –∏–º—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã',
          '–î–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –ª–æ–≥–æ—Ç–∏–ø',
          '–ù–∞–ø–∏—à–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
          '–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ)'
        ],
        tip: '–í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è'
      },
      {
        title: '–ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞',
        icon: 'BarChart',
        color: 'orange',
        description: '–í–∫–ª–∞–¥–∫–∞ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"',
        content: [
          '–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∑–∏—Ç–æ–≤',
          '–£–∑–Ω–∞–π—Ç–µ –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏',
          '–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–Ω–∏ –∏ –≤—Ä–µ–º—è',
          '–ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö'
        ],
        tip: '–ü–ª–∞—Ç–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –¥–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É'
      },
      {
        title: '–ì–æ—Ç–æ–≤–æ!',
        icon: 'CheckCircle2',
        color: 'green',
        description: '–í—ã –ø—Ä–æ—à–ª–∏ —Ç—É—Ä –ø–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º—É —Ç–∞—Ä–∏—Ñ—É',
        content: [
          '‚úì –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑–∏—Ç–∫–∏ —Å QR-–∫–æ–¥–æ–º',
          '‚úì –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤',
          '‚úì –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤',
          'üîí –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∫–æ–º–∞–Ω–¥–∞ ‚Äî –≤ –ø–ª–∞—Ç–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–∞—Ö'
        ],
        tip: '–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞'
      }
    ],
    basic: [
      {
        title: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!',
        icon: 'Zap',
        color: 'green',
        description: '–í—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ',
        content: [
          '–î–æ 5 –≤–∏–∑–∏—Ç–æ–∫ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π',
          '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç',
          '–§–æ—Ä–º–∞ –¥–ª—è —Å–±–æ—Ä–∞ –∑–∞—è–≤–æ–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤',
          '–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç–∑—ã–≤—ã'
        ],
        tip: '–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π –∏ —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤'
      },
      {
        title: '–ü—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω',
        icon: 'Palette',
        color: 'blue',
        description: '–í–∫–ª–∞–¥–∫–∞ "–î–∏–∑–∞–π–Ω"',
        content: [
          '–í—ã–±–∏—Ä–∞–π—Ç–µ –∏–∑ 20+ –≥–æ—Ç–æ–≤—ã—Ö —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è',
          '–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —Ü–≤–µ—Ç–∞ –ø–æ–¥ –≤–∞—à –±—Ä–µ–Ω–¥',
          '–ú–µ–Ω—è–π—Ç–µ —à—Ä–∏—Ñ—Ç—ã –∏ —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫',
          '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏'
        ],
        tip: '–°–æ–∑–¥–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –≤–∏–∑–∏—Ç–∫–∏'
      },
      {
        title: '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ',
        icon: 'Briefcase',
        color: 'orange',
        description: '–í–∫–ª–∞–¥–∫–∞ "–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ"',
        content: [
          '–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–æ—Ç–æ –≤–∞—à–∏—Ö —Ä–∞–±–æ—Ç –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤',
          '–û–ø–∏—Å—ã–≤–∞–π—Ç–µ –∫–µ–π—Å—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
          '–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º',
          '–ö–ª–∏–µ–Ω—Ç—ã —É–≤–∏–¥—è—Ç –≤–∞—à –æ–ø—ã—Ç —Å—Ä–∞–∑—É'
        ],
        tip: '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤'
      },
      {
        title: '–°–±–æ—Ä –∑–∞—è–≤–æ–∫',
        icon: 'Inbox',
        color: 'green',
        description: '–í–∫–ª–∞–¥–∫–∞ "–õ–∏–¥—ã"',
        content: [
          '–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞—è–≤–æ–∫ –Ω–∞ –≤–∏–∑–∏—Ç–∫–µ',
          '–ü–æ–ª—É—á–∞–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤',
          '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö –Ω–∞ email',
          '–í—Å–µ –∑–∞—è–≤–∫–∏ –≤ –æ–¥–Ω–æ–º —É–¥–æ–±–Ω–æ–º —Å–ø–∏—Å–∫–µ'
        ],
        tip: '–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∏–∑–∏—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤'
      },
      {
        title: '–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥',
        icon: 'Star',
        color: 'orange',
        description: '–í–∫–ª–∞–¥–∫–∞ "–û—Ç–∑—ã–≤—ã"',
        content: [
          '–°–æ–±–∏—Ä–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤',
          '–§–æ—Ä–º–∏—Ä—É–π—Ç–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Ä–µ–ø—É—Ç–∞—Ü–∏—é',
          '–†–µ–π—Ç–∏–Ω–≥ –≤ –∑–≤—ë–∑–¥–∞—Ö –≤–∏–¥–µ–Ω –≤—Å–µ–º –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è–º',
          '–ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π'
        ],
        tip: '–û—Ç–∑—ã–≤—ã –ø–æ–≤—ã—à–∞—é—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é –¥–æ 47%'
      },
      {
        title: '–ì–æ—Ç–æ–≤–æ!',
        icon: 'CheckCircle2',
        color: 'green',
        description: '–í—ã –æ—Å–≤–æ–∏–ª–∏ –±–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ',
        content: [
          '‚úì –î–æ 5 –≤–∏–∑–∏—Ç–æ–∫ —Å –ø—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω–æ–º',
          '‚úì –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ —Å–±–æ—Ä –∑–∞—è–≤–æ–∫',
          '‚úì –û—Ç–∑—ã–≤—ã –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞',
          'üîí CRM, –∫–æ–º–∞–Ω–¥–∞, API ‚Äî –≤ Pro —Ç–∞—Ä–∏—Ñ–µ'
        ],
        tip: '–û–±–Ω–æ–≤–∏—Ç–µ—Å—å –¥–æ Pro –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–∞–Ω–¥–æ–π'
      }
    ],
    pro: [
      {
        title: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º',
        icon: 'Crown',
        color: 'blue',
        description: '–í—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ Pro —Ç–∞—Ä–∏—Ñ',
        content: [
          '–î–æ 50 –≤–∏–∑–∏—Ç–æ–∫ –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã',
          '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CRM –∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏',
          '–ö–æ–º–∞–Ω–¥–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–æ–ª–∏',
          'API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏'
        ],
        tip: '–î–ª—è –∞–≥–µ–Ω—Ç—Å—Ç–≤ –∏ —Ä–∞—Å—Ç—É—â–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞'
      },
      {
        title: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π',
        icon: 'Users',
        color: 'green',
        description: '–í–∫–ª–∞–¥–∫–∞ "–ö–æ–º–∞–Ω–¥–∞"',
        content: [
          '–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤–∏–∑–∏—Ç–∫–∏ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤',
          '–ï–¥–∏–Ω—ã–π –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö',
          '–ù–∞–∑–Ω–∞—á–∞–π—Ç–µ —Ä–æ–ª–∏: –∞–¥–º–∏–Ω, —Ä–µ–¥–∞–∫—Ç–æ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
          '–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ –æ–¥–Ω–æ–π –ø–∞–Ω–µ–ª–∏'
        ],
        tip: '–û–±–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã –∑–∞ –º–∏–Ω—É—Ç—É'
      },
      {
        title: 'CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏',
        icon: 'Plug',
        color: 'orange',
        description: '–í–∫–ª–∞–¥–∫–∞ "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"',
        content: [
          '–ü–æ–¥–∫–ª—é—á–∏—Ç–µ AmoCRM, Bitrix24, HubSpot',
          '–ó–∞—è–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –≤–∞—à—É CRM',
          '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram, WhatsApp, Email',
          '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º'
        ],
        tip: '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å –ª–∏–¥–∞–º–∏'
      },
      {
        title: '–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞',
        icon: 'BarChart',
        color: 'blue',
        description: '–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã',
        content: [
          '–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É',
          '–í–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –æ—Ç –≤–∏–∑–∏—Ç–∞ –¥–æ –∑–∞—è–≤–∫–∏',
          '–ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞–Ω–∞–ª–æ–≤',
          '–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ Excel –∏ PDF'
        ],
        tip: '–ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö'
      },
      {
        title: 'API –¥–æ—Å—Ç—É–ø',
        icon: 'Code',
        color: 'green',
        description: '–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤',
        content: [
          'REST API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–∑–∏—Ç–∫–∞–º–∏',
          '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏',
          '–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑–∏—Ç–æ–∫ —á–µ—Ä–µ–∑ API',
          'Webhook –¥–ª—è —Å–æ–±—ã—Ç–∏–π (–Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä)'
        ],
        tip: '–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤'
      },
      {
        title: '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!',
        icon: 'Trophy',
        color: 'orange',
        description: '–í—ã –∏–∑—É—á–∏–ª–∏ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Pro',
        content: [
          '‚úì –î–æ 50 –≤–∏–∑–∏—Ç–æ–∫ —Å –∫–æ–º–∞–Ω–¥–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º',
          '‚úì CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ API',
          '‚úì –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞',
          '‚úì –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7'
        ],
        tip: '–ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å'
      }
    ]
  };

  const steps = tourSteps[plan];
  const step = steps[currentStep];
  const progress = ((currentStep + 1) / steps.length) * 100;

  const handleNext = () => {
    if (currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1);
    } else {
      onComplete();
      onOpenChange(false);
      setCurrentStep(0);
    }
  };

  const handlePrev = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1);
    }
  };

  const handleSkip = () => {
    onComplete();
    onOpenChange(false);
    setCurrentStep(0);
  };

  const colorMap = {
    gray: 'bg-gray-500',
    green: 'bg-green',
    blue: 'bg-blue',
    orange: 'gradient-accent'
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-w-2xl">
        <div className="space-y-6">
          <div className="flex items-center justify-between">
            <Badge className="gradient-bg text-white border-0">
              –®–∞–≥ {currentStep + 1} –∏–∑ {steps.length}
            </Badge>
            <Button variant="ghost" size="sm" onClick={handleSkip}>
              –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç—É—Ä
            </Button>
          </div>

          <Progress value={progress} className="h-2" />

          <div className="text-center space-y-4">
            <div className={`w-20 h-20 ${colorMap[step.color as keyof typeof colorMap]} rounded-2xl flex items-center justify-center mx-auto shadow-xl`}>
              <Icon name={step.icon as any} className="text-white" size={40} />
            </div>

            <div>
              <h2 className="text-3xl font-bold gradient-text mb-2">{step.title}</h2>
              <p className="text-muted-foreground">{step.description}</p>
            </div>
          </div>

          <div className="bg-muted/30 rounded-lg p-6 space-y-3">
            {step.content.map((item, idx) => (
              <div key={idx} className="flex items-start gap-3">
                {item.startsWith('‚úì') ? (
                  <Icon name="Check" className="text-green flex-shrink-0 mt-1" size={20} />
                ) : item.startsWith('üîí') ? (
                  <Icon name="Lock" className="text-muted-foreground flex-shrink-0 mt-1" size={20} />
                ) : (
                  <Icon name="Sparkles" className="text-blue flex-shrink-0 mt-1" size={20} />
                )}
                <span className="text-sm leading-relaxed">{item.replace(/^[‚úìüîí]\s*/, '')}</span>
              </div>
            ))}
          </div>

          <div className="bg-blue/10 border border-blue/20 rounded-lg p-4 flex items-start gap-3">
            <Icon name="Lightbulb" className="text-blue flex-shrink-0 mt-0.5" size={20} />
            <div>
              <div className="font-semibold text-sm mb-1">–°–æ–≤–µ—Ç:</div>
              <div className="text-sm text-muted-foreground">{step.tip}</div>
            </div>
          </div>

          <div className="flex gap-3">
            <Button
              variant="outline"
              className="flex-1"
              onClick={handlePrev}
              disabled={currentStep === 0}
            >
              <Icon name="ChevronLeft" className="mr-2" size={18} />
              –ù–∞–∑–∞–¥
            </Button>
            <Button
              className="flex-1 gradient-bg text-white hover:opacity-90"
              onClick={handleNext}
            >
              {currentStep === steps.length - 1 ? (
                <>
                  –ó–∞–≤–µ—Ä—à–∏—Ç—å
                  <Icon name="Check" className="ml-2" size={18} />
                </>
              ) : (
                <>
                  –î–∞–ª–µ–µ
                  <Icon name="ChevronRight" className="ml-2" size={18} />
                </>
              )}
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );
};

export default DemoTour;
